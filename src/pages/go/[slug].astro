---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const picks = await getCollection('picks');
  return picks.map(pick => ({
    params: { slug: pick.slug },
    props: { affUrl: pick.data.aff_url }
  }));
}

const { affUrl } = Astro.props;

// Perform 301 redirect to affiliate URL
return Astro.redirect(affUrl, 301);
---